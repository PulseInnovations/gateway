# Test case: Template with Gateway-level override (no GatewayClass)
# This test verifies that Gateway-level EnvoyProxy merges with template
# even when there's no GatewayClass-level EnvoyProxy.

envoyGateway:
  apiVersion: gateway.envoyproxy.io/v1alpha1
  kind: EnvoyGateway
  gateway:
    controllerName: gateway.envoyproxy.io/gatewayclass-controller
  provider:
    type: Kubernetes
    kubernetes:
      envoyProxyTemplate:
        provider:
          type: Kubernetes
          kubernetes:
            envoyDeployment:
              replicas: 3
              container:
                env:
                - name: TEMPLATE_ENV
                  value: template_value
                resources:
                  requests:
                    cpu: 200m
                    memory: 1Gi
            envoyService:
              type: LoadBalancer

envoyProxiesForGateways:
- apiVersion: gateway.envoyproxy.io/v1alpha1
  kind: EnvoyProxy
  metadata:
    name: gateway-proxy
    namespace: default
  spec:
    logging:
      level:
        default: debug
    provider:
      type: Kubernetes
      kubernetes:
        envoyDeployment:
          container:
            env:
            - name: GATEWAY_ENV
              value: gateway_value
