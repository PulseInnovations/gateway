# Expected output: Gateway overrides template (no GatewayClass in the middle)
# - replicas: 3 (inherited from template, Gateway didn't override)
# - env vars: merged (both TEMPLATE_ENV and GATEWAY_ENV)
# - resources: inherited from template
# - envoyService.type: LoadBalancer (inherited from template)
# - logging.level: debug (from Gateway, template didn't have logging config)

apiVersion: gateway.envoyproxy.io/v1alpha1
kind: EnvoyProxy
metadata:
  name: gateway-proxy
  namespace: default
spec:
  logging:
    level:
      default: debug
  provider:
    type: Kubernetes
    kubernetes:
      envoyDeployment:
        replicas: 3
        container:
          env:
          - name: GATEWAY_ENV
            value: gateway_value
          - name: TEMPLATE_ENV
            value: template_value
          resources:
            requests:
              cpu: 200m
              memory: 1Gi
      envoyService:
        type: LoadBalancer
