# Test case: Template with DaemonSet configuration
# This test verifies that EnvoyProxyTemplate works with DaemonSet mode
# in addition to Deployment mode.

envoyGateway:
  apiVersion: gateway.envoyproxy.io/v1alpha1
  kind: EnvoyGateway
  gateway:
    controllerName: gateway.envoyproxy.io/gatewayclass-controller
  provider:
    type: Kubernetes
    kubernetes:
      envoyProxyTemplate:
        provider:
          type: Kubernetes
          kubernetes:
            envoyDaemonSet:
              container:
                env:
                - name: TEMPLATE_ENV
                  value: template_value
                resources:
                  requests:
                    cpu: 100m
                    memory: 512Mi
              pod:
                annotations:
                  template-annotation: template-value
            envoyService:
              type: LoadBalancer

envoyProxyForGatewayClass:
  apiVersion: gateway.envoyproxy.io/v1alpha1
  kind: EnvoyProxy
  metadata:
    name: gatewayclass-daemonset-proxy
    namespace: envoy-gateway-system
  spec:
    provider:
      type: Kubernetes
      kubernetes:
        envoyDaemonSet:
          container:
            env:
            - name: GATEWAYCLASS_ENV
              value: gatewayclass_value
          pod:
            annotations:
              gatewayclass-annotation: gatewayclass-value
