# Expected output: DaemonSet configuration merged with template
# - env vars: merged (both TEMPLATE_ENV and GATEWAYCLASS_ENV)
# - resources: inherited from template
# - annotations: merged from both levels
# - envoyService.type: LoadBalancer (inherited from template)

apiVersion: gateway.envoyproxy.io/v1alpha1
kind: EnvoyProxy
metadata:
  name: gatewayclass-daemonset-proxy
  namespace: envoy-gateway-system
spec:
  provider:
    type: Kubernetes
    kubernetes:
      envoyDaemonSet:
        container:
          env:
          - name: GATEWAYCLASS_ENV
            value: gatewayclass_value
          - name: TEMPLATE_ENV
            value: template_value
          resources:
            requests:
              cpu: 100m
              memory: 512Mi
        pod:
          annotations:
            template-annotation: template-value
            gatewayclass-annotation: gatewayclass-value
      envoyService:
        type: LoadBalancer
